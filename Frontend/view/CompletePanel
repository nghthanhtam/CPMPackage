{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|uiInterfaceName": "default",
        "designer|userAlias": "completepanel",
        "designer|userClassName": "CompletePanel",
        "header": false,
        "layout": "card",
        "title": "Đánh giá hoàn thành",
        "variable": "111"
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "layout": "string",
        "title": "string",
        "margin": "auto",
        "activeItem": "auto",
        "designer|uiInterfaceName": "string",
        "frame": "boolean",
        "header": "boolean",
        "variable": "string"
    },
    "name": "VendorCompletePanel1",
    "designerId": "e941a2c3-cbf4-4bdf-b508-be8323089b3a",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "variable",
            "type": "string"
        }
    ],
    "viewControllerInstanceId": "3880100d-bd4f-40f9-97bc-1ae6f3cc8aa3",
    "viewModelInstanceId": "c1e51a9f-b491-471c-8078-4cd0956dbdea",
    "cn": [
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "reference": "gpDetail",
                "store": [
                    "{masters}"
                ]
            },
            "configAlternates": {
                "designer|userAlias": "string",
                "designer|userClassName": "string",
                "title": "string",
                "store": "binding",
                "reference": "string"
            },
            "name": "GridItems6",
            "designerId": "ad3c3127-8a23-41bb-946b-40a616fb5fe3",
            "cn": [
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "cwcref",
                        "lockable": true,
                        "text": "Số đánh giá",
                        "width": 100
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "lockable": "boolean"
                    },
                    "name": "MyColumn3",
                    "designerId": "848e8167-b2d6-44bb-9393-acbb88a48da9",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter14",
                            "designerId": "4e2dccc3-2e2d-4b4b-84d3-3c1ed6fff70d"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "contractcode",
                        "text": "Mã hợp đồng"
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn110",
                    "designerId": "1c339d41-c846-4007-8563-b6cdc218c868",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter15",
                            "designerId": "580917f8-590f-4118-9732-2ca37f380af3"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "vendor",
                        "text": "Nhà cung cấp"
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn146",
                    "designerId": "cc176365-e230-4af7-a213-70ec8c72b0b3",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter15",
                            "designerId": "f3e41a6c-4c0f-40a7-a63e-7aa8b13513e4"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "requesteddate",
                        "format": "d/m/Y",
                        "text": "Ngày lập",
                        "width": 85
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyDateColumn18",
                    "designerId": "b1c4bc13-ec16-4205-967b-7d23718708bc",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Date",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyDateFilter8",
                            "designerId": "d98ff99d-c967-419a-b437-bb2a56222831"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "evaluateddate",
                        "format": "d/m/Y",
                        "text": "Ngày đánh giá",
                        "width": 99
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyDateColumn19",
                    "designerId": "ad172323-a13e-4aa6-ac6f-cbce76b39516",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Date",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyDateFilter9",
                            "designerId": "ba46384a-0b8c-43ed-a446-ba8a30ca547b"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "end",
                        "dataIndex": "requestedvalue",
                        "format": "0,000",
                        "text": "Giá trị đề xuất",
                        "width": 126
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "align": "string",
                        "format": "string"
                    },
                    "name": "MyNumberColumn31",
                    "designerId": "9c684612-0676-4ec9-92e7-7d0d9821fc13",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "b774a948-846a-4f7b-9cbb-7332b5a97505"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "align": "end",
                        "dataIndex": "evaluatedvalue",
                        "format": "0,000",
                        "text": "Giá trị đánh giá",
                        "width": 126
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "align": "string",
                        "format": "string"
                    },
                    "name": "MyNumberColumn32",
                    "designerId": "b799c2fe-bfdb-46ea-a373-c317f64fc479",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "facff6df-5097-49e8-9d61-771692d28ca5"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "status",
                        "text": "Trạng thái",
                        "width": 105
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn111",
                    "designerId": "23e55335-62b8-4efb-b004-23903b8cedec",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "40953315-2d88-4f4b-ac52-ff3e0b4091a5"
                        },
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "var text = value;",
                                    "",
                                    "if(value === 'W'){",
                                    "    text = value + ' - Chờ duyệt';",
                                    "}else",
                                    "if(value === 'V'){",
                                    "    text = value + ' - Đã kiểm tra';",
                                    "}else",
                                    "if (value === 'A'){",
                                    "    text = value + ' - Đã duyệt';",
                                    "}else",
                                    "    text = value + ' - Hủy';",
                                    "return text;"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "renderer",
                            "designerId": "a5262820-ddff-4369-9047-ee9a009ebab0"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "milestone",
                        "text": "Đợt thanh toán",
                        "width": 200
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn112",
                    "designerId": "66e8c395-1602-4551-9ac0-df2241123bc3",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "c8286b10-aa84-4f89-b864-08abab499501"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "cwcdesc",
                        "text": "Diễn giải",
                        "width": 253
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn113",
                    "designerId": "f6d485da-f6eb-4712-80fa-b20d5c1a0195",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "6803a147-63cb-4e7a-9cf1-a8cbafa7a4be"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "createdby",
                        "text": "NV tạo"
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn32",
                    "designerId": "49b6d8c0-8af8-489d-8c26-5bfc4de25aa0",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "14a66dd5-593e-4b18-a9da-4bf22f85feea"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "createddate",
                        "format": "d/m/Y",
                        "text": "Ngày tạo",
                        "width": 85
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyDateColumn34",
                    "designerId": "5b56d00d-427e-4ad5-bd13-9ac75576d41a",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Date",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyDateFilter10",
                            "designerId": "59b4b068-5a94-40d0-9e94-fea8507c2749"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "updatedby",
                        "text": "NV cập nhật"
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyColumn167",
                    "designerId": "66170b6a-70ca-46a0-b853-3318fe2f654a",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter17",
                            "designerId": "5dfac662-53d0-4855-ab9b-9477499e4b18"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "lastupdate",
                        "format": "d/m/Y",
                        "text": "Ngày cập nhật",
                        "width": 95
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyDateColumn30",
                    "designerId": "52f9255c-86d4-47a4-b190-2660002dceaf",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Date",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyDateFilter11",
                            "designerId": "6d4e9bee-24cf-4153-b61d-8f3a880ada0a"
                        }
                    ]
                },
                {
                    "type": "Ext.view.Table",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "MyTable",
                    "designerId": "577b0d74-346a-4769-9af1-c40d282978e9"
                },
                {
                    "type": "Ext.grid.filters.Filters",
                    "reference": {
                        "name": "plugins",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|createAlias": "filterbar"
                    },
                    "configAlternates": {
                        "menuFilterText": "string",
                        "designer|createAlias": "string"
                    },
                    "name": "MyGridFiltersPlugin4",
                    "designerId": "39520459-7c39-4170-9eea-2851bc18bc46"
                },
                {
                    "type": "Ext.grid.plugin.BufferedRenderer",
                    "reference": {
                        "name": "plugins",
                        "type": "array"
                    },
                    "codeClass": null,
                    "name": "MyBufferedRenderer",
                    "designerId": "6cfd8690-18a8-4901-bbb3-ca8fed1ffa93"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onGpDetailCellDbClick",
                        "implHandler": [
                            "var me = this,",
                            "    v = me.getView(),",
                            "    vm = me.getViewModel(),",
                            "    gridDet = me.lookupReference('gridDet'),",
                            "    status = record.get('status'),",
                            "    approvebtn = v.down('#approvebtn');",
                            "",
                            "this.mixins.baseController.viewRecord.call(this,record,function(record){",
                            "    me.isError = false;",
                            "    if(status === 'W' || status === 'V'){",
                            "        if(approvebtn) approvebtn.show();",
                            "    }",
                            "    else {",
                            "        if(approvebtn) approvebtn.hide();",
                            "    }",
                            "    me.setDetails(record);",
                            "    me.enableDetButtons(false);",
                            "});"
                        ],
                        "name": "celldblclick",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onGpDetailCellDbClick",
                    "designerId": "8b393e83-bf7b-4bf4-b821-aa70209a5c36"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onGridpanelSelect",
                        "implHandler": [
                            "var me = this,",
                            "    v  = me.getView(),",
                            "    vm = me.getViewModel(),",
                            "    approvebtn = v.down('#approvebtn'),",
                            "    verifybtn = v.down('#verifybtn'),",
                            "    status = record.get('status'),",
                            "    idApprove = 2246,",
                            "    tbar = me.lookupReference('tbar'),",
                            "    delbtn = tbar.down('#delbtn'),",
                            "    ops = tavico.app.getController('MainController').authConfig.operations[idApprove];",
                            "",
                            "if (status == 'A'){",
                            "    if(approvebtn) approvebtn.hide();",
                            "    if(verifybtn) verifybtn.hide();",
                            "}",
                            "else{",
                            "    if(approvebtn) approvebtn.show();",
                            "    if(verifybtn) verifybtn.show();",
                            "}",
                            "",
                            "if(verifybtn){",
                            "    if(status === 'W'){",
                            "        verifybtn.show();",
                            "    }else if(status === 'V'){",
                            "        verifybtn.hide();",
                            "    }",
                            "}"
                        ],
                        "name": "select",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onGridpanelSelect",
                    "designerId": "228735a7-f8bd-4f94-a039-2feb848596bb"
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "fieldDefaults": [
                    "{labelAlign: 'right', labelSeparator: '', labelWidth: 120}"
                ],
                "itemId": "frmDetail",
                "layout": "vbox",
                "margin": "5 0 0 0",
                "reference": "frmdetail",
                "width": 100
            },
            "configAlternates": {
                "fieldDefaults": "object",
                "margin": "auto",
                "reference": "string",
                "container|align": "string",
                "itemId": "string",
                "layout": "string",
                "width": "auto"
            },
            "name": "MyForm12",
            "designerId": "5421eb7b-5c6d-4b7b-9566-c5147b1d9b15",
            "cn": [
                {
                    "type": "Ext.form.FieldContainer",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "layout": "vbox"
                    },
                    "configAlternates": {
                        "container|align": "string",
                        "layout": "string"
                    },
                    "name": "MyFieldContainer10",
                    "designerId": "bf4eed7f-9e57-4a3e-8087-b87ad2267c46",
                    "cn": [
                        {
                            "type": "Ext.form.FieldContainer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "hbox"
                            },
                            "configAlternates": {
                                "container|align": "string",
                                "layout": "string"
                            },
                            "name": "MyFieldContainer16",
                            "designerId": "1473fb20-c204-44f3-9517-af7af365e215",
                            "cn": [
                                {
                                    "type": "Ext.form.FieldContainer",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "stretch",
                                        "flex": 2,
                                        "layout": "vbox"
                                    },
                                    "configAlternates": {
                                        "container|align": "string",
                                        "layout": "string",
                                        "flex": "number"
                                    },
                                    "name": "MyFieldContainer14",
                                    "designerId": "134a2dfc-b30a-4ab2-a390-12182baea70a",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "emptyText": "< Số tự tăng >",
                                                "fieldLabel": "Số đánh giá",
                                                "maxWidth": 300,
                                                "name": "cwcref",
                                                "reference": "cwcref",
                                                "value": [
                                                    "{bindRecord.cwcref}"
                                                ]
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "name": "string",
                                                "reference": "string",
                                                "value": "binding",
                                                "maxWidth": "number",
                                                "emptyText": "string"
                                            },
                                            "name": "MyTextField63",
                                            "designerId": "fa9a4d7c-8f4d-4e2e-b736-6fffa1bb1186"
                                        },
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "autoLoadOnValue": true,
                                                "displayField": "name",
                                                "fieldLabel": "Nhà cung cấp",
                                                "matchFieldWidth": false,
                                                "maxWidth": 400,
                                                "name": "vendor",
                                                "pageSize": 10,
                                                "reference": "vendor",
                                                "store": [
                                                    "{nadcodes}"
                                                ],
                                                "value": [
                                                    "{bindRecord.vendor}"
                                                ],
                                                "valueField": "nadcode"
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "maxWidth": "number",
                                                "name": "string",
                                                "reference": "string",
                                                "value": "binding",
                                                "disabled": "boolean",
                                                "store": "binding",
                                                "autoLoadOnValue": "boolean",
                                                "displayField": "datafield",
                                                "matchFieldWidth": "boolean",
                                                "pageSize": "number",
                                                "valueField": "datafield"
                                            },
                                            "name": "MyComboBox28",
                                            "designerId": "fd6ef8ef-a083-49f2-aa6b-128e468fa8f7",
                                            "cn": [
                                                {
                                                    "type": "viewcontrollereventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onNadcodeBlur",
                                                        "implHandler": [
                                                            "var me = this,",
                                                            "    v = me.getView(),",
                                                            "    main\t= v.up('maincontainer'),",
                                                            "    vm = me.getViewModel(),",
                                                            "    r = vm.get('bindRecord'),",
                                                            "    contracts = vm.getStore('contracts');",
                                                            "if (Ext.isEmpty(newValue)){",
                                                            "    contracts.getProxy().setExtraParams({});",
                                                            "    contracts.getProxy().setExtraParam('project',main.projectRecord.get('id'));",
                                                            "    contracts.getProxy().setExtraParam('status','A');",
                                                            "    contracts.load();",
                                                            "}else{",
                                                            "    contracts.getProxy().setExtraParam('vendor',newValue);",
                                                            "    contracts.load();",
                                                            "}",
                                                            "// if(!Ext.isEmpty(contracts.getProxy().getExtraParam('vendor'))){",
                                                            "//     old = contracts.getProxy().getExtraParam('vendor');",
                                                            "// }",
                                                            "",
                                                            "// if (old != r.get('vendor')) {",
                                                            "//     if (!r.get('vendor')) contracts.getProxy().setExtraParam('vendor', r.get('vendor'));",
                                                            "//     else contracts.getProxy().setExtraParam('vendor', null);",
                                                            "//     contracts.load();",
                                                            "// }",
                                                            "// if(!Ext.isEmpty(component.value)){",
                                                            "//     contracts.getProxy().setExtraParam('vendor', r.get('vendor'));",
                                                            "//     contracts.load();",
                                                            "// }else{",
                                                            "//     contracts.getProxy().setExtraParam('vendor',null);",
                                                            "//     contracts.load();",
                                                            "// }"
                                                        ],
                                                        "name": "change",
                                                        "scope": "me"
                                                    },
                                                    "configAlternates": {
                                                        "fn": "string",
                                                        "implHandler": "code",
                                                        "name": "string",
                                                        "scope": "string"
                                                    },
                                                    "name": "onNadcodeBlur",
                                                    "designerId": "97305c81-1d3a-497f-9385-adafead2e575"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "autoLoadOnValue": true,
                                                "displayField": "contractcode",
                                                "fieldLabel": "Mã hợp đồng",
                                                "matchFieldWidth": false,
                                                "maxWidth": 400,
                                                "minChars": 2,
                                                "name": "contractcode",
                                                "pageSize": 10,
                                                "reference": "contractcode",
                                                "store": [
                                                    "{contracts}"
                                                ],
                                                "value": [
                                                    "{bindRecord.contractcode}"
                                                ],
                                                "valueField": "contractcode"
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "layout|flex": "number",
                                                "name": "string",
                                                "reference": "string",
                                                "value": "binding",
                                                "store": "binding",
                                                "displayField": "datafield",
                                                "valueField": "datafield",
                                                "autoLoadOnValue": "boolean",
                                                "minChars": "number",
                                                "pageSize": "number",
                                                "matchFieldWidth": "boolean",
                                                "allowBlank": "boolean",
                                                "maxWidth": "number"
                                            },
                                            "name": "MyComboBox2",
                                            "designerId": "785d56a6-3564-420d-b88b-56a574bb8714",
                                            "cn": [
                                                {
                                                    "type": "viewcontrollereventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onContractBlur",
                                                        "implHandler": [
                                                            "var me = this,",
                                                            "    vm = me.getViewModel(),",
                                                            "    gridDet = me.lookupReference('gridDet'),",
                                                            "    milestones = vm.getStore('milestones');",
                                                            "",
                                                            "if(!Ext.isEmpty(component.value)){",
                                                            "    milestones.getProxy().setExtraParam('contractcode', component.value);",
                                                            "    milestones.load();",
                                                            "    gridDet.getStore().removeAll();",
                                                            "}"
                                                        ],
                                                        "name": "blur",
                                                        "scope": "me"
                                                    },
                                                    "configAlternates": {
                                                        "fn": "string",
                                                        "implHandler": "code",
                                                        "name": "string",
                                                        "scope": "string"
                                                    },
                                                    "name": "onContractBlur",
                                                    "designerId": "e66f8de0-f39b-4603-9466-afc3425f0fd0"
                                                },
                                                {
                                                    "type": "Ext.view.BoundList",
                                                    "reference": {
                                                        "name": "listConfig",
                                                        "type": "object"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "itemSelector": "div"
                                                    },
                                                    "configAlternates": {
                                                        "itemSelector": "string"
                                                    },
                                                    "name": "MyBoundList3",
                                                    "designerId": "912e67bd-f25e-4fc8-8866-dc58e2622453",
                                                    "cn": [
                                                        {
                                                            "type": "Ext.XTemplate",
                                                            "reference": {
                                                                "name": "itemTpl",
                                                                "type": "object"
                                                            },
                                                            "codeClass": null,
                                                            "userConfig": {
                                                                "designer|displayName": "itemTpl",
                                                                "implHandler": [
                                                                    "{contractcode} - {contracttitle}"
                                                                ]
                                                            },
                                                            "configAlternates": {
                                                                "designer|displayName": "string",
                                                                "implHandler": "code"
                                                            },
                                                            "name": "itemTpl",
                                                            "designerId": "e82b3ee5-518f-4fa4-b535-282d73165a86"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "autoLoadOnValue": true,
                                                "displayField": "paymentdesc",
                                                "fieldLabel": "Đợt thanh toán",
                                                "maxWidth": 400,
                                                "minChars": 2,
                                                "name": "milestone",
                                                "pageSize": 10,
                                                "store": [
                                                    "{milestones}"
                                                ],
                                                "value": [
                                                    "{bindRecord.milestone}"
                                                ],
                                                "valueField": "milestone"
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "name": "string",
                                                "reference": "string",
                                                "value": "binding",
                                                "maxWidth": "number",
                                                "store": "binding",
                                                "displayField": "datafield",
                                                "matchFieldWidth": "boolean",
                                                "pageSize": "number",
                                                "valueField": "datafield",
                                                "autoLoadOnValue": "boolean",
                                                "minChars": "number"
                                            },
                                            "name": "MyComboBox26",
                                            "designerId": "2a585c59-9dbc-4b7c-9eef-b71094c614d7"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.FieldContainer",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "stretch",
                                        "flex": 1,
                                        "layout": "vbox",
                                        "padding": "0 5 0 0"
                                    },
                                    "configAlternates": {
                                        "container|align": "string",
                                        "layout": "string",
                                        "flex": "number",
                                        "padding": "auto"
                                    },
                                    "name": "MyFieldContainer15",
                                    "designerId": "0af2a332-f6db-41dc-827a-52467e42fd59",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "autoLoadOnValue": true,
                                                "disabled": true,
                                                "displayField": "name",
                                                "fieldLabel": "Tình trạng ",
                                                "name": "status",
                                                "reference": "status",
                                                "store": [
                                                    "{StoreWARV}"
                                                ],
                                                "value": [
                                                    "{bindRecord.status}"
                                                ],
                                                "valueField": "code"
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "layout|flex": "number",
                                                "name": "string",
                                                "reference": "string",
                                                "store": "binding",
                                                "displayField": "datafield",
                                                "valueField": "datafield",
                                                "value": "binding",
                                                "disabled": "boolean",
                                                "maxWidth": "number",
                                                "autoLoadOnValue": "boolean"
                                            },
                                            "name": "MyComboBox84",
                                            "designerId": "253d8794-ed55-4cb0-957f-36c3d1e4808d"
                                        },
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "autoLoadOnValue": true,
                                                "displayField": "name",
                                                "fieldLabel": "Nhóm truy cập ",
                                                "matchFieldWidth": false,
                                                "minChars": 2,
                                                "name": "dagid",
                                                "pageSize": 10,
                                                "reference": "dagid",
                                                "store": [
                                                    "{dagids}"
                                                ],
                                                "value": [
                                                    "{bindRecord.dagid}"
                                                ],
                                                "valueField": "dagid"
                                            },
                                            "configAlternates": {
                                                "fieldLabel": "string",
                                                "layout|flex": "number",
                                                "store": "binding",
                                                "displayField": "datafield",
                                                "name": "string",
                                                "reference": "string",
                                                "valueField": "datafield",
                                                "value": "binding",
                                                "matchFieldWidth": "boolean",
                                                "autoLoadOnValue": "boolean",
                                                "minChars": "number",
                                                "pageSize": "number"
                                            },
                                            "name": "MyComboBox54",
                                            "designerId": "cba26394-996f-4b2c-8017-ba7b773e26f6"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.FieldContainer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "vbox"
                            },
                            "configAlternates": {
                                "container|align": "string",
                                "layout": "string"
                            },
                            "name": "MyFieldContainer17",
                            "designerId": "6a277d79-cdfa-42e3-997b-6444b2e65da2",
                            "cn": [
                                {
                                    "type": "Ext.form.FieldContainer",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "stretch",
                                        "layout": "hbox"
                                    },
                                    "configAlternates": {
                                        "container|align": "string",
                                        "layout": "string"
                                    },
                                    "name": "MyFieldContainer29",
                                    "designerId": "76d7e949-0c30-4ebf-a7e3-bd4880ae6e40",
                                    "cn": [
                                        {
                                            "type": "Ext.form.FieldContainer",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "container|align": "stretch",
                                                "layout": "vbox"
                                            },
                                            "configAlternates": {
                                                "container|align": "string",
                                                "layout": "string"
                                            },
                                            "name": "MyFieldContainer36",
                                            "designerId": "46e79d7b-dff9-4899-9201-df0daada7b95",
                                            "cn": [
                                                {
                                                    "type": "Ext.form.field.Date",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "allowBlank": false,
                                                        "fieldLabel": "Ngày lập",
                                                        "maxWidth": 240,
                                                        "name": "requesteddate",
                                                        "reference": "requesteddate",
                                                        "value": [
                                                            "{bindRecord.requesteddate}"
                                                        ]
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "allowBlank": "boolean",
                                                        "maxWidth": "number"
                                                    },
                                                    "name": "MyDateField34",
                                                    "designerId": "0042975a-9245-426a-b9df-50c24ccf45d4"
                                                },
                                                {
                                                    "type": "Ext.form.field.ComboBox",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "autoLoadOnValue": true,
                                                        "displayField": "name",
                                                        "fieldLabel": "Người lập ",
                                                        "matchFieldWidth": false,
                                                        "name": "requestedby",
                                                        "pageSize": 10,
                                                        "store": [
                                                            "{hremployees}"
                                                        ],
                                                        "value": [
                                                            "{bindRecord.requestedby}"
                                                        ],
                                                        "valueField": "employee"
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "store": "binding",
                                                        "autoLoadOnValue": "boolean",
                                                        "displayField": "datafield",
                                                        "pageSize": "number",
                                                        "valueField": "datafield",
                                                        "matchFieldWidth": "boolean"
                                                    },
                                                    "name": "MyComboBox27",
                                                    "designerId": "0427507e-da7a-4555-a763-7a1845d96489"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.form.FieldContainer",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "container|align": "stretch",
                                                "layout": "vbox"
                                            },
                                            "configAlternates": {
                                                "container|align": "string",
                                                "layout": "string"
                                            },
                                            "name": "MyFieldContainer37",
                                            "designerId": "d012e933-6b05-415e-b4b5-7d4e8de7bc64",
                                            "cn": [
                                                {
                                                    "type": "Ext.form.field.Date",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fieldLabel": "Ngày đánh giá ",
                                                        "maxWidth": 240,
                                                        "name": "evaluateddate",
                                                        "value": [
                                                            "{bindRecord.evaluateddate}"
                                                        ]
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "maxWidth": "number"
                                                    },
                                                    "name": "MyDateField34",
                                                    "designerId": "8572e76f-7969-4bae-b477-ecf583058d0c"
                                                },
                                                {
                                                    "type": "Ext.form.field.ComboBox",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "autoLoadOnValue": true,
                                                        "displayField": "name",
                                                        "fieldLabel": "NV đánh giá ",
                                                        "minChars": 2,
                                                        "pageSize": 10,
                                                        "store": [
                                                            "{hremployees}"
                                                        ],
                                                        "value": [
                                                            "{bindRecord.evaluatedby}"
                                                        ],
                                                        "valueField": "employee"
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "store": "binding",
                                                        "autoLoadOnValue": "boolean",
                                                        "displayField": "datafield",
                                                        "minChars": "number",
                                                        "pageSize": "number",
                                                        "valueField": "datafield"
                                                    },
                                                    "name": "MyComboBox34",
                                                    "designerId": "9ba96103-2b57-4bc9-9012-c2f9c70600bd"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.form.FieldContainer",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "container|align": "stretch",
                                                "layout": "vbox"
                                            },
                                            "configAlternates": {
                                                "container|align": "string",
                                                "layout": "string"
                                            },
                                            "name": "MyFieldContainer38",
                                            "designerId": "4436567b-7d4d-46ca-a103-8c597163ddd4",
                                            "cn": [
                                                {
                                                    "type": "Ext.form.field.Date",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "disabled": true,
                                                        "fieldLabel": "Ngày duyệt",
                                                        "maxWidth": 240,
                                                        "name": "approveddate",
                                                        "reference": "approveddate",
                                                        "value": [
                                                            "{bindRecord.approveddate}"
                                                        ]
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "maxWidth": "number",
                                                        "disabled": "boolean"
                                                    },
                                                    "name": "MyDateField34",
                                                    "designerId": "0374e9f1-e9a7-49b0-a0c9-c618afc15890"
                                                },
                                                {
                                                    "type": "Ext.form.field.Display",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fieldLabel": "NV duyệt: ",
                                                        "reference": "approvedby",
                                                        "value": [
                                                            "{bindRecord.approvedby}"
                                                        ]
                                                    },
                                                    "configAlternates": {
                                                        "fieldLabel": "string",
                                                        "layout|flex": "number",
                                                        "name": "string",
                                                        "reference": "string",
                                                        "value": "binding",
                                                        "disabled": "boolean",
                                                        "store": "binding",
                                                        "autoLoadOnValue": "boolean",
                                                        "displayField": "datafield",
                                                        "valueField": "datafield",
                                                        "readOnly": "boolean"
                                                    },
                                                    "name": "MyDisplayField2",
                                                    "designerId": "6bce6836-608a-47b9-a37f-4da323f0b2a1",
                                                    "cn": [
                                                        {
                                                            "type": "fixedfunction",
                                                            "reference": {
                                                                "name": "items",
                                                                "type": "array"
                                                            },
                                                            "codeClass": null,
                                                            "userConfig": {
                                                                "designer|params": [
                                                                    "value",
                                                                    "displayField"
                                                                ],
                                                                "fn": "renderer",
                                                                "implHandler": [
                                                                    "var val = tavico.app.getController('MainController').authConfig.operatorname;",
                                                                    "if(Ext.isEmpty(val)) val = '';",
                                                                    "return val;"
                                                                ]
                                                            },
                                                            "configAlternates": {
                                                                "designer|params": "typedarray",
                                                                "fn": "string",
                                                                "implHandler": "code"
                                                            },
                                                            "name": "renderer",
                                                            "designerId": "e52e988a-05a9-4011-81ab-9d5d6bcce794"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "Diễn giải ",
                                        "layout|flex": 1,
                                        "name": "cwcdesc",
                                        "padding": "0 5 0 0",
                                        "value": [
                                            "{bindRecord.cwcdesc}"
                                        ]
                                    },
                                    "configAlternates": {
                                        "fieldLabel": "string",
                                        "layout|flex": "number",
                                        "name": "string",
                                        "reference": "string",
                                        "value": "binding",
                                        "margin": "auto",
                                        "padding": "auto",
                                        "allowBlank": "boolean"
                                    },
                                    "name": "MyTextField127",
                                    "designerId": "13cac745-6f6a-42a1-87af-49659e866d23"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Ghi chú",
                                        "padding": "0 5 0 0",
                                        "reference": "comments",
                                        "value": [
                                            "{bindRecord.comments}"
                                        ]
                                    },
                                    "configAlternates": {
                                        "fieldLabel": "string",
                                        "layout|flex": "number",
                                        "name": "string",
                                        "reference": "string",
                                        "value": "binding",
                                        "margin": "auto",
                                        "padding": "auto"
                                    },
                                    "name": "MyTextField134",
                                    "designerId": "64898d61-de72-4b8f-b543-83405dab468e"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "enableColumnMove": false,
                        "enableLocking": true,
                        "flex": 1,
                        "lockText": "Khóa",
                        "lockedViewConfig": [
                            "{",
                            "listeners: {",
                            "        groupclick: function(view, node, group, e, eOpts) {",
                            "            if(!e.getTarget('.grpCheckbox')){",
                            "                if(view.features[0].isExpanded(group)){",
                            "                    view.features[0].collapse(group);",
                            "                }else{",
                            "                view.features[0].expand(group);",
                            "            }",
                            "            return;",
                            "            }",
                            "            var me = this,",
                            "            groups = view.getStore().getGroups().items,",
                            "            selectedGrRec,",
                            "            grid = me.up('grid'),",
                            "            prevSelectedRecs = grid.getSelectionModel().getSelection(),",
                            "            ckHeader = e.getTarget('.grpCheckbox');",
                            "            groups.forEach(function(r){",
                            "                if(r._groupKey === group){",
                            "                    selectedGrRec = r.items;",
                            "                    prevSelectedRecs = prevSelectedRecs.concat(r.items);",
                            "                    return false;",
                            "                }",
                            "            });",
                            "",
                            "            if(ckHeader.checked) grid.getSelectionModel().select(prevSelectedRecs);",
                            "            else grid.getSelectionModel().deselect(selectedGrRec);",
                            "        }",
                            "    }",
                            "}"
                        ],
                        "normalViewConfig": [
                            "{",
                            "listeners: {",
                            "        groupclick: function(view, node, group, e, eOpts) {",
                            "            if(!e.getTarget('.grpCheckbox')){",
                            "                if(view.features[0].isExpanded(group)){",
                            "                    view.features[0].collapse(group);",
                            "                }else{",
                            "                view.features[0].expand(group);",
                            "            }",
                            "            return;",
                            "            }",
                            "            var me = this,",
                            "            groups = view.getStore().getGroups().items,",
                            "            selectedGrRec,",
                            "            grid = me.up('grid'),",
                            "            prevSelectedRecs = grid.getSelectionModel().getSelection(),",
                            "            ckHeader = e.getTarget('.grpCheckbox');",
                            "            groups.forEach(function(r){",
                            "                if(r._groupKey === group){",
                            "                    selectedGrRec = r.items;",
                            "                    prevSelectedRecs = prevSelectedRecs.concat(r.items);",
                            "                    return false;",
                            "                }",
                            "            });",
                            "",
                            "            if(ckHeader.checked) grid.getSelectionModel().select(prevSelectedRecs);",
                            "            else grid.getSelectionModel().deselect(selectedGrRec);",
                            "        }",
                            "    }",
                            "}"
                        ],
                        "reference": "gridDet",
                        "stateful": true,
                        "store": [
                            "{masterdetailsCWC}"
                        ],
                        "unlockText": "Mở"
                    },
                    "configAlternates": {
                        "store": "binding",
                        "flex": "number",
                        "layout|flex": "number",
                        "reference": "string",
                        "enableLocking": "boolean",
                        "enableColumnMove": "boolean",
                        "lockText": "string",
                        "lockedViewConfig": "object",
                        "normalViewConfig": "object",
                        "unlockText": "string",
                        "stateful": "boolean"
                    },
                    "name": "MyGridPanel31",
                    "designerId": "aae286c1-019a-410f-87e7-3bd643324b09",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top"
                            },
                            "configAlternates": {
                                "dock": "string"
                            },
                            "name": "MyToolbar20",
                            "designerId": "1dbeaaf3-e33c-42a3-b866-3251214b8678",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "iconCls": "x-fa fa-plus",
                                        "itemId": "contractItemsBtn",
                                        "layout|flex": null,
                                        "text": "Hạng mục hợp đồng"
                                    },
                                    "configAlternates": {
                                        "layout|flex": "number",
                                        "text": "string",
                                        "iconCls": "string",
                                        "itemId": "string"
                                    },
                                    "name": "MyButton67",
                                    "designerId": "508d8fb2-ead4-4b22-8188-8fc37ce7803e",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onContractItemsClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    v = me.getView(),",
                                                    "    vm = me.getViewModel(),",
                                                    "    mds\t= vm.getStore('masterdetailsCWC'),",
                                                    "    main\t= v.up('maincontainer'),",
                                                    "    notIds\t= [],",
                                                    "    wd;",
                                                    "",
                                                    "if (!main.projectRecord) {",
                                                    "    Ext.History.add('home');",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "mds.each(function(r) {",
                                                    "    Ext.Array.push(notIds, r.get('itemid')) ;",
                                                    "});",
                                                    "",
                                                    "wd = Ext.create('tavico.view.WdContractItemCWC', {",
                                                    "    bindRecord: vm.get('bindRecord'),",
                                                    "    detailModel: mds.getModel(),",
                                                    "    notIds: notIds",
                                                    "});",
                                                    "wd.on('successCallback', function(recs) {",
                                                    "    Ext.Array.each(recs, function(r) {",
                                                    "        var eRec = mds.findRecord('itemid', r.get('itemid')),",
                                                    "            d\t= r.getData();",
                                                    "        delete d.id;",
                                                    "",
                                                    "        if (eRec) {",
                                                    "            eRec.set(d);",
                                                    "        } else {",
                                                    "            var nRec = Ext.create(mds.getModel());",
                                                    "            nRec.set(d);",
                                                    "            mds.add(nRec);",
                                                    "        }",
                                                    "    });",
                                                    "});",
                                                    "wd.show();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onContractItemsClick",
                                            "designerId": "69156bcf-1762-4a12-a880-7242182af778"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "iconCls": "x-fa fa-plus",
                                        "itemId": "importBtn",
                                        "layout|flex": null,
                                        "text": "Tải nhập"
                                    },
                                    "configAlternates": {
                                        "layout|flex": "number",
                                        "text": "string",
                                        "iconCls": "string",
                                        "itemId": "string"
                                    },
                                    "name": "MyButton68",
                                    "designerId": "d8bbf07c-fe0a-49c5-ac4d-f8ae6828f208",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onItemListClick",
                                                "implHandler": [
                                                    "var me\t= this,",
                                                    "    w\t= Ext.widget('wdimport'),",
                                                    "    vm\t= me.getViewModel(),",
                                                    "    s\t= vm.getStore('masterdetailsCWC');",
                                                    "me.getView().variable = 'abc';",
                                                    "if (w.setImportType('CWCD',{",
                                                    "    cwcref: vm.get('bindRecord.cwcref'),",
                                                    "",
                                                    "})) {",
                                                    "",
                                                    "    w.show();",
                                                    "    w.on('successCallback', function() {",
                                                    "        s.load();",
                                                    "    });",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onItemListClick",
                                            "designerId": "a59ae9f1-cfad-45b0-91b7-0b3aa581d33d"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "iconCls": "x-fa fa-copy",
                                        "itemId": "copyFromReqBtn",
                                        "layout|flex": null,
                                        "text": "Sao chép từ đề xuất"
                                    },
                                    "configAlternates": {
                                        "layout|flex": "number",
                                        "text": "string",
                                        "iconCls": "string",
                                        "itemId": "string"
                                    },
                                    "name": "MyButton150",
                                    "designerId": "b53e0d84-4b25-4a44-8359-01a374e7e558",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCopyFromRqeClick",
                                                "implHandler": [
                                                    "var me\t= this,",
                                                    "    w\t= Ext.widget('wdimport'),",
                                                    "    vm\t= me.getViewModel(),",
                                                    "    gridDet =  me.lookupReference('gridDet'),",
                                                    "    rec = gridDet.getView().getSelectionModel().getSelection()[0];",
                                                    "    rec.set('rate',rec.get('vrate'));",
                                                    "    rec.set('qty',rec.get('vqty'));",
                                                    "    rec.set('value',rec.get('vvalue'));"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onCopyFromRqeClick",
                                            "designerId": "1194dafa-52db-4f3b-a4c4-b8bb9cda3242"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "iconCls": "x-fa fa-history",
                                        "itemId": "historyBtn",
                                        "layout|flex": null,
                                        "text": "Lịch sử đánh giá",
                                        "width": 140
                                    },
                                    "configAlternates": {
                                        "layout|flex": "number",
                                        "text": "string",
                                        "iconCls": "string",
                                        "itemId": "string",
                                        "width": "auto"
                                    },
                                    "name": "MyButton154",
                                    "designerId": "6fe4ce7f-bd28-465d-aaf5-05cdd85539c7",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onHistoryClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    v = me.getView(),",
                                                    "    vm = me.getViewModel(),",
                                                    "    mds\t= vm.getStore('masterdetailsCWC'),",
                                                    "    main\t= v.up('maincontainer'),",
                                                    "    gridDet = me.lookupReference('gridDet'),",
                                                    "    selectedRecs = gridDet.getSelectionModel().getSelection(),",
                                                    "    itemids = [],",
                                                    "    wd;",
                                                    "",
                                                    "if(selectedRecs.length === 0) return;",
                                                    "",
                                                    "if (!main.projectRecord) {",
                                                    "    Ext.History.add('home');",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "selectedRecs.forEach(function(r){",
                                                    "    itemids.push(r.get('itemid'));",
                                                    "});",
                                                    "",
                                                    "// mds.each(function(r) {",
                                                    "//     Ext.Array.push(notIds, r.get('itemid')) ;",
                                                    "// });",
                                                    "",
                                                    "wd = Ext.create('tavico.view.WdWorkComHistory', {",
                                                    "    bindRecord: vm.get('bindRecord'),",
                                                    "    detailModel: mds.getModel(),",
                                                    "    itemids: itemids",
                                                    "});",
                                                    "wd.on('successCallback', function(recs) {",
                                                    "    Ext.Array.each(recs, function(r) {",
                                                    "        var eRec = mds.findRecord('itemid', r.get('itemid')),",
                                                    "            d\t= r.getData();",
                                                    "        delete d.id;",
                                                    "",
                                                    "        if (eRec) {",
                                                    "            eRec.set(d);",
                                                    "        } else {",
                                                    "            var nRec = Ext.create(mds.getModel());",
                                                    "            nRec.set(d);",
                                                    "            mds.add(nRec);",
                                                    "        }",
                                                    "    });",
                                                    "});",
                                                    "",
                                                    "wd.show();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onHistoryClick",
                                            "designerId": "94265f6f-91a2-4e40-a1fe-04dcab3761f6"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "delCol",
                                "lockable": false,
                                "locked": true,
                                "width": 42
                            },
                            "configAlternates": {
                                "width": "auto",
                                "itemId": "string",
                                "lockable": "boolean",
                                "locked": "boolean"
                            },
                            "name": "MyActionColumn11",
                            "designerId": "c48aac65-aab2-4059-a6e4-86d36134e3c7",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "iconCls": "x-fa fa-close"
                                    },
                                    "configAlternates": {
                                        "iconCls": "string"
                                    },
                                    "name": "MyActionColumnItem3",
                                    "designerId": "1298e9be-17ed-41dc-832f-b9e41f575357",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "view.getStore('masterdetails').remove(record);"
                                                ]
                                            },
                                            "configAlternates": {
                                                "designer|params": "typedarray",
                                                "fn": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "handler",
                                            "designerId": "cc37e786-7ddb-442f-8db0-09dafea2afbd"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTable17",
                            "designerId": "39f8d95a-1348-4050-9230-3a53a38a8cc5"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "chaptername",
                                "hidden": true,
                                "lockable": false,
                                "text": "Biểu"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "editable": "boolean",
                                "width": "auto",
                                "lockable": "boolean",
                                "hidden": "boolean"
                            },
                            "name": "MyColumn230",
                            "designerId": "dcf80e07-579f-4eb2-abd6-e865fc437ea9"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "itemdesc",
                                "lockable": true,
                                "text": "Nội dung",
                                "width": 280
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "lockable": "boolean"
                            },
                            "name": "MyColumn115",
                            "designerId": "3cb580e9-e077-4cbf-bfac-d6c31a09f7b3"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "itemcate",
                                "hidden": true,
                                "lockable": true,
                                "text": "Mã hạng mục",
                                "width": 96
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "editable": "boolean",
                                "width": "auto",
                                "lockable": "boolean",
                                "hidden": "boolean"
                            },
                            "name": "MyColumn48",
                            "designerId": "69ed7f58-276d-44a8-9a55-82a2cfb91e2e"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "locdesc",
                                "lockable": true,
                                "text": "Vị trí - khu vực",
                                "width": 130
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "lockable": "boolean"
                            },
                            "name": "MyColumn116",
                            "designerId": "d9541f9d-7cee-4e57-90f3-e07240d53b07"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "unit",
                                "lockable": true,
                                "text": "Đơn vị"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "lockable": "boolean"
                            },
                            "name": "MyColumn117",
                            "designerId": "1ca06264-22fe-4ae6-b604-99b3aafe8ebf"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "end",
                                "dataIndex": "quantity",
                                "lockable": true,
                                "text": "Khối lượng"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "align": "string",
                                "lockable": "boolean"
                            },
                            "name": "MyNumberColumn34",
                            "designerId": "a6e6b9a8-baa7-4fa4-bc94-62955aca421a"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "end",
                                "dataIndex": "totalamt",
                                "lockable": true,
                                "text": "Giá trị",
                                "width": 120
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "align": "string",
                                "width": "auto",
                                "lockable": "boolean"
                            },
                            "name": "MyNumberColumn35",
                            "designerId": "f6b0b35c-4015-4560-a510-d95af0ae5c86"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "style": "background-color:#E9EBF7;",
                                "text": "Đánh giá"
                            },
                            "configAlternates": {
                                "text": "string",
                                "style": "string"
                            },
                            "name": "MyColumn164",
                            "designerId": "68d7935b-6e85-4e0b-ae0e-d76652ec6cea",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "rate",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn60",
                                    "designerId": "559ef28d-1f68-48ec-8d65-7e7ffabcf9ae",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Number",
                                            "reference": {
                                                "name": "editor",
                                                "type": "object"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|createAlias": "mynumberfield"
                                            },
                                            "configAlternates": {
                                                "designer|createAlias": "string"
                                            },
                                            "name": "MyNumberField86",
                                            "designerId": "1d42dcee-5eb1-4f40-803d-1dede00875f5"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "qty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn61",
                                    "designerId": "dd83b7bc-b1a9-4c44-ab4d-41faeae50bf7",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Number",
                                            "reference": {
                                                "name": "editor",
                                                "type": "object"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|createAlias": "mynumberfield"
                                            },
                                            "configAlternates": {
                                                "designer|createAlias": "string"
                                            },
                                            "name": "MyNumberField87",
                                            "designerId": "1c506a85-f922-4317-a5b6-921cfe1a2f71"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "value",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn62",
                                    "designerId": "fe61b7f5-aa18-450e-b3bc-c0cbda0a5fd6",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Number",
                                            "reference": {
                                                "name": "editor",
                                                "type": "object"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|createAlias": "mynumberfield"
                                            },
                                            "configAlternates": {
                                                "designer|createAlias": "string"
                                            },
                                            "name": "MyNumberField88",
                                            "designerId": "6c672525-e014-4b53-95d2-918a3f694d5f"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Tiến độ hoàn thành"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn193",
                            "designerId": "6a083997-1341-41d5-bad1-85ad2ca93611",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "percentdone",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "width": "auto",
                                        "align": "string",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn38",
                                    "designerId": "e207a5ab-b419-4484-824b-415f8de2e3d6"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "completedqty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn41",
                                    "designerId": "287b5986-2097-43aa-90b2-4a9ae5d83ba5"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "completedvalue",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn42",
                                    "designerId": "5eebc835-6084-4998-872b-5f4cfe696354"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Lũy kế đánh giá"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn160",
                            "designerId": "dfce97e9-4a3b-4427-af20-3c302d0408ab",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "orate",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "width": "auto",
                                        "align": "string",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn38",
                                    "designerId": "f88f7cba-1209-452c-9168-5e7e00705450"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "oqty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn41",
                                    "designerId": "82f2ab89-cfc9-4032-be25-6ac666327818"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "ovalue",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn42",
                                    "designerId": "cda983f0-f1f5-4d50-a264-6cef445d2d97"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Lũy kế sau đánh giá"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn165",
                            "designerId": "5ed1de91-fa1e-45d9-bec8-1ad772072698",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumrate",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn63",
                                    "designerId": "5f895741-11db-470a-ae5e-817be04540d9"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumqty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn64",
                                    "designerId": "aa43abcd-b98b-48c8-92df-7c5bfe2dfb8d"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumvalue",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn65",
                                    "designerId": "ead2800a-9ab8-4a1e-b7a9-c4b0d782618c"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Lũy kế đề xuất"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn161",
                            "designerId": "6f6e6a2e-dae4-4aa0-92cd-deef3892b69b",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "ovrate",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "width": "auto",
                                        "align": "string",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn43",
                                    "designerId": "942ef417-7050-4f43-a105-432d023de023"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "ovqty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn44",
                                    "designerId": "93d7af0a-1c8a-463d-8e4a-fa2962d92c33"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "chaptercode",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn45",
                                    "designerId": "71e70a30-0582-40c0-91e8-6767cda80c08"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Đề xuất"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn162",
                            "designerId": "fc3aa287-779d-4585-87ff-00f1deea290a",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "vrate",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "width": "auto",
                                        "align": "string",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn33",
                                    "designerId": "af109ce4-be89-44d6-a630-5dde517302ba"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "vqty",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn36",
                                    "designerId": "37d4ed85-f5f0-4856-8b9d-e991378eef74"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "vvalue",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn46",
                                    "designerId": "12d70584-4f12-4c5e-a96c-916a68c787fd"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "Lũy kế sau đề xuất"
                            },
                            "configAlternates": {
                                "text": "string"
                            },
                            "name": "MyColumn163",
                            "designerId": "795644e2-e476-44d3-b250-96d196ac20c5",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumrate1",
                                        "text": "%",
                                        "width": 60
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn40",
                                    "designerId": "13bc8800-029b-4f02-be5c-90d16c10e432"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumqty1",
                                        "format": "0,000",
                                        "text": "Khối lượng"
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn47",
                                    "designerId": "05bc5cf9-a42b-4336-99e8-436a0eef9c84"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "align": "end",
                                        "dataIndex": "sumvalue1",
                                        "format": "0,000",
                                        "text": "Giá trị",
                                        "width": 120
                                    },
                                    "configAlternates": {
                                        "dataIndex": "datafield",
                                        "text": "string",
                                        "align": "string",
                                        "width": "auto",
                                        "format": "string"
                                    },
                                    "name": "MyNumberColumn48",
                                    "designerId": "7b0d55c9-585f-4313-8cb5-676d509eb5fd"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "comments",
                                "itemId": "gccmt",
                                "text": "Ghi chú",
                                "width": 220
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "itemId": "string",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn238",
                            "designerId": "73a4e2b8-f685-46e3-a476-6584dabe460b",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "editor",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyTextField198",
                                    "designerId": "d5d593f6-9ae9-4b48-9fca-6efe564c1d60"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.feature.Grouping",
                            "reference": {
                                "name": "features",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "collapsible": false,
                                "enableGroupingMenu": false
                            },
                            "configAlternates": {
                                "collapsible": "boolean",
                                "enableGroupingMenu": "boolean"
                            },
                            "name": "MyGroupingFeature5",
                            "designerId": "84f94522-4a5f-49b3-95e6-9b9ac44fef71",
                            "cn": [
                                {
                                    "type": "Ext.XTemplate",
                                    "reference": {
                                        "name": "groupHeaderTpl",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "groupHeaderTpl",
                                        "implHandler": [
                                            "<div class=\"container\" style=\"display:flex\">",
                                            "    <input class=\"grpCheckbox\" type=\"checkbox\"></input>",
                                            "    <div style=\"font-weight:bold; padding-left:5px;\">{name}</div>",
                                            "</div>"
                                        ]
                                    },
                                    "configAlternates": {
                                        "designer|displayName": "string",
                                        "implHandler": "code"
                                    },
                                    "name": "groupHeaderTpl",
                                    "designerId": "9258e5b1-fd18-4f02-a9be-8fbac5a4278b"
                                }
                            ]
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGridpanelGroupClick",
                                "implHandler": [
                                    "if(!e.getTarget('.grpCheckbox')){",
                                    "    if(view.features[0].isExpanded(group)){",
                                    "        view.features[0].collapse(group);",
                                    "    }else{",
                                    "        view.features[0].expand(group);",
                                    "    }",
                                    "    return;",
                                    "}",
                                    "var me = this,",
                                    "    groups = view.getStore().getGroups().items,",
                                    "    selectedGrRec,",
                                    "    grid = me.lookupReference('gridDet'),",
                                    "    prevSelectedRecs = grid.getSelectionModel().getSelection(),",
                                    "    ckHeader = e.getTarget('.grpCheckbox');",
                                    "groups.forEach(function(r){",
                                    "    if(r._groupKey === group){",
                                    "        selectedGrRec = r.items;",
                                    "        prevSelectedRecs = prevSelectedRecs.concat(r.items);",
                                    "        return false;",
                                    "    }",
                                    "});",
                                    "",
                                    "if(ckHeader.checked) grid.getSelectionModel().select(prevSelectedRecs);",
                                    "else grid.getSelectionModel().deselect(selectedGrRec);"
                                ],
                                "name": "groupclick",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onGridpanelGroupClick",
                            "designerId": "89b02980-0d46-4808-ba74-c6fc84ddbaad"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "editor",
                                    "context"
                                ],
                                "fn": "onGridpanelEdit",
                                "implHandler": [
                                    "var me = this,",
                                    "    v = me.getView(),",
                                    "    sDet = me.getViewModel().getStore('gridDet'),",
                                    "    column = context.column,",
                                    "    record = context.record,",
                                    "    orate = record.get('orate'),",
                                    "    oqty = record.get('oqty'),",
                                    "    ovalue = record.get('ovalue'),",
                                    "    rate = record.get('rate'),",
                                    "    qty = record.get('qty'),",
                                    "    value = record.get('value'),",
                                    "    grid = me.lookupReference('gridDet'),",
                                    "    msg\t= '',",
                                    "    isError = false,",
                                    "    main\t= v.up('maincontainer'),",
                                    "    validSetup\t= main.projectRecord.data;",
                                    "me.isError = false;",
                                    "",
                                    "if(column.dataIndex === 'rate') {",
                                    "    if(!Ext.isEmpty(grid.getView().getSelectionModel().getSelection()[0])){",
                                    "        record.set('sumrate',rate + orate);",
                                    "    }",
                                    "    checkValue(record.get('sumrate'),record.get('percentdone'));",
                                    "    var ratio = 0;",
                                    "    if(record.get('rate') !== 0) ratio = record.get('percentdone') / record.get('rate');",
                                    "    if(ratio !== 0){",
                                    "        record.set('qty', record.get('completedqty') / ratio);",
                                    "        record.set('value', record.get('completedvalue') / ratio);",
                                    "    }else{",
                                    "        record.set('qty', 0);",
                                    "        record.set('value', 0);",
                                    "    }",
                                    "",
                                    "} else if(column.dataIndex === 'qty') {",
                                    "    if(!Ext.isEmpty(grid.getView().getSelectionModel().getSelection()[0])){",
                                    "        record.set('sumqty',qty + oqty);",
                                    "    }",
                                    "    checkValue(record.get('sumqty'),record.get('completedqty'));",
                                    "    var ratio = 0;",
                                    "    if(record.get('qty') !== 0) ratio = record.get('completedqty') / record.get('qty');",
                                    "    if(ratio !== 0){",
                                    "        record.set('rate', record.get('percentdone') / ratio);",
                                    "        record.set('value', record.get('completedvalue') / ratio);",
                                    "    }else{",
                                    "        record.set('rate', 0);",
                                    "        record.set('value', 0);",
                                    "    }",
                                    "",
                                    "} else if(column.dataIndex === 'value') {",
                                    "    if(!Ext.isEmpty(grid.getView().getSelectionModel().getSelection()[0])){",
                                    "        record.set('sumvalue',value + ovalue);",
                                    "    }",
                                    "    checkValue(record.get('sumvalue'),record.get('completedvalue'));",
                                    "    var ratio = 0;",
                                    "    if(record.get('value') !== 0) ratio = record.get('completedvalue') / record.get('value');",
                                    "    if(ratio !== 0){",
                                    "        record.set('qty', record.get('completedqty') / ratio);",
                                    "        record.set('rate', record.get('percentdone') / ratio);",
                                    "    }else{",
                                    "        record.set('qty', 0);",
                                    "        record.set('rate', 0);",
                                    "    }",
                                    "}",
                                    "",
                                    "function resetValue(){",
                                    "    if(column.dataIndex === 'rate'){",
                                    "        record.set('rate',0);",
                                    "    }else  if(column.dataIndex === 'qty'){",
                                    "        record.set('qty',0);",
                                    "    }else{",
                                    "        record.set('value',0);",
                                    "    }",
                                    "}",
                                    "",
                                    "function checkValue(field, completeField){",
                                    "    if (validSetup.wcvsprogress == 'N') {",
                                    "        return;",
                                    "    }",
                                    "    if (Ext.isEmpty(field) || field - (completeField + completeField * validSetup.wcvsprogressrate/100) <= 0){",
                                    "        return;",
                                    "    }",
                                    "",
                                    "    if (field - (completeField + completeField * validSetup.wcvsprogressrate/100) > 0 && validSetup.wcvsprogress != 'N') {",
                                    "        msg += ' tiến độ hoàn thành';",
                                    "        if (validSetup.wcvsprogress == 'E') isError = true;",
                                    "    }",
                                    "",
                                    "    //     if (Ext.isEmpty(field) || field - (completeField + completeField * validSetup.wcvendorvsprogressrate/100) <= 0){",
                                    "    //         return;",
                                    "    //     }",
                                    "",
                                    "    if (!isError) {",
                                    "        Ext.Msg.alert({",
                                    "            title: 'Cảnh báo',",
                                    "            message: 'Đã vượt'+msg+', bạn có muốn lưu giá trị vừa nhập?',",
                                    "            buttons: Ext.Msg.YESNO,",
                                    "            icon: Ext.Msg.QUESTION,",
                                    "            fn: function(btn) {",
                                    "                if (btn === 'no') {",
                                    "                    resetValue();",
                                    "                }",
                                    "",
                                    "            }",
                                    "        });",
                                    "        return;",
                                    "    }",
                                    "",
                                    "    Ext.Msg.alert({",
                                    "        title: 'Lỗi',",
                                    "        message: 'Đã vượt '+msg+'!',",
                                    "        icon: Ext.Msg.ERROR,",
                                    "        buttons: Ext.Msg.OK",
                                    "    });",
                                    "    resetValue();",
                                    "    //me.isError = isError;",
                                    "}"
                                ],
                                "name": "edit",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onGridpanelEdit",
                            "designerId": "eadce511-3ac8-4293-ace4-714fb88218cb"
                        },
                        {
                            "type": "Ext.grid.plugin.CellEditing",
                            "reference": {
                                "name": "plugins",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "clicksToEdit": 1
                            },
                            "configAlternates": {
                                "clicksToEdit": "number"
                            },
                            "name": "MyCellEditingPlugin7",
                            "designerId": "64f75cc9-47dd-439e-a2df-7233e1eb8d7a"
                        },
                        {
                            "type": "Ext.selection.CheckboxModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyCheckboxSelectionModel10",
                            "designerId": "8820bd50-1c19-46da-8a3f-2414c6ebd4d8"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGridpanelLockcolumn",
                                "implHandler": [
                                    "var lock_data='',",
                                    "    lcs_data = localStorage.getItem('lock_data');",
                                    "if(lcs_data){",
                                    "    lock_data = lcs_data;",
                                    "}",
                                    "if(!lock_data.includes(column.text)){",
                                    "    lock_data += column.text+'|';",
                                    "    localStorage.setItem('lock_data',lock_data);",
                                    "}"
                                ],
                                "name": "lockcolumn",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onGridpanelLockcolumn",
                            "designerId": "1005b63a-2d82-4edf-a4fa-65c2a0310e02"
                        },
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGridpanelUnlockcolumn",
                                "implHandler": [
                                    "var lock_data='',",
                                    "    lcs_data = localStorage.getItem('lock_data');",
                                    "if(!Ext.isEmpty(lcs_data)){",
                                    "    lock_data = lcs_data;",
                                    "    lock_data = lock_data.replace(column.text+'|','');",
                                    "    localStorage.setItem('lock_data',lock_data);",
                                    "}"
                                ],
                                "name": "unlockcolumn",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onGridpanelUnlockcolumn",
                            "designerId": "808e2b67-bc85-4937-b574-2c6db2f4c443"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "footer",
                "dock": "top",
                "reference": "tbar",
                "ui": "footer"
            },
            "configAlternates": {
                "designer|createAlias": "string",
                "dock": "string",
                "itemId": "string",
                "designer|uiInterfaceName": "string",
                "ui": "string",
                "reference": "string",
                "padding": "auto"
            },
            "name": "MyToolbar2",
            "designerId": "8563a905-bd1a-452d-b44d-097e6d3343e6",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-list",
                        "itemId": "listbtn",
                        "layout|flex": null,
                        "text": "Danh sách"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton37",
                    "designerId": "f71cc4a5-3ca5-4954-a080-af9c28870428",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onListClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v  = me.getView(),",
                                    "    approvebtn = v.down('#approvebtn');",
                                    "if(approvebtn) approvebtn.show();",
                                    "this.mixins.baseController.list.call(this);"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onListClick",
                            "designerId": "860e52e7-0c58-459e-8269-7e8887697ccc"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-plus",
                        "itemId": "addbtn",
                        "layout|flex": null,
                        "text": " Thêm"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton5",
                    "designerId": "b56a5944-44c3-44f7-95a2-a26a772c8a45",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onAddClick",
                                "implHandler": [
                                    "var me \t \t = this,",
                                    "    v \t\t = me.getView(),",
                                    "    vm\t\t = me.getViewModel(),",
                                    "    main\t = v.up('maincontainer'),",
                                    "    s\t     = vm.getStore('masters'),",
                                    "    sDet\t = vm.getStore('masterdetailsCWC'),",
                                    "    nRec   \t = Ext.create(s.getModel()),",
                                    "    keyField = me.lookupReference('cwcref'),",
                                    "    mCtr = tavico.app.getController('MainController');",
                                    "",
                                    "nRec.set({",
                                    "    cwcref:'',",
                                    "    status: 'W',",
                                    "    requestedtype: 'C',",
                                    "    requesteddate: new Date(),",
                                    "    requestedby: mCtr.authConfig.employee,",
                                    "    vendor: mCtr.authConfig.nadcode,",
                                    "    project: main.projectRecord.get('id'),",
                                    "    comments: ''",
                                    "});",
                                    "",
                                    "if (!me.keyFields) {",
                                    "    me.keyFields = [keyField];",
                                    "}",
                                    "",
                                    "me.mixins.baseController.addRecord.call(me, nRec, function() {",
                                    "    if (v.down('#approvebtn')) v.down('#approvebtn').hide();",
                                    "    sDet.getProxy().setExtraParam('cwcref', '-');",
                                    "    sDet.load();",
                                    "",
                                    "    mCtr.hasSeq('CWC', function(isSeq) {",
                                    "        if (isSeq) {",
                                    "            keyField.setReadOnly(true);",
                                    "            keyField.allowBlank = true;",
                                    "            me.lookupReference('frmdetail').down('field[readOnly=false]').focus();",
                                    "        } else {",
                                    "            keyField.setEmptyText('');",
                                    "            keyField.setReadOnly(false);",
                                    "            keyField.allowBlank = false;",
                                    "            keyField.focus();",
                                    "        }",
                                    "    });",
                                    "    me.enableDetButtons(true);",
                                    "});",
                                    ""
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onAddClick",
                            "designerId": "8c8c5dc4-b495-45fc-906c-ffa2e7e208e9"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-copy",
                        "itemId": "copybtn",
                        "layout|flex": null,
                        "text": "Sao chép"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton32",
                    "designerId": "ed380ed6-9ce0-4286-a2f8-003319f15f3e",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCopyClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    s\t= vm.getStore('masters'),",
                                    "    form = me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    sDet = vm.getStore('masterdetailsCWC'),",
                                    "    keyField = me.lookupReference('cwcref'),",
                                    "    selectedRecord, nRec,",
                                    "    mCtr = tavico.app.getController('MainController');",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "} else selectedRecord = grid.getView().getSelectionModel().getSelection()[0];",
                                    "",
                                    "if (selectedRecord) {",
                                    "    nRec\t= selectedRecord.copy();",
                                    "    nRec.set({cwcref:'',",
                                    "              status:'W',",
                                    "              approvedref:'',",
                                    "              approveddate:'',",
                                    "              evaluateddate:''});",
                                    "    nRec.phantom = true;",
                                    "    if (!me.keyFields) {",
                                    "        me.keyFields = [keyField];",
                                    "    }",
                                    "    var rec = Ext.create(grid.getStore().getModel());",
                                    "    me.mixins.baseController.addRecord.call(me, nRec, function(){",
                                    "        if (v.down('#approvebtn')) v.down('#approvebtn').hide();",
                                    "        sDet.getProxy().setExtraParam('cwcref', selectedRecord.get('cwcref'));",
                                    "        sDet.load(function(recs) {",
                                    "            Ext.Array.each(recs, function(r) {",
                                    "                var rD = rec.getData();",
                                    "                r.phantom = true;",
                                    "            });",
                                    "        });",
                                    "        mCtr.hasSeq('CWC', function(isSeq) {",
                                    "            if (isSeq) {",
                                    "                keyField.setReadOnly(true);",
                                    "                keyField.allowBlank = true;",
                                    "                me.lookupReference('frmdetail').down('field[readOnly=false]').focus();",
                                    "            } else {",
                                    "                keyField.setEmptyText('');",
                                    "                keyField.setReadOnly(false);",
                                    "                keyField.allowBlank = false;",
                                    "                keyField.focus();",
                                    "            }",
                                    "        });",
                                    "        me.enableDetButtons(true);",
                                    "    });",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onCopyClick",
                            "designerId": "4f546a70-f7a5-4444-857d-ef4b20c4ac3f"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-close",
                        "itemId": "cancelbtn",
                        "layout|flex": null,
                        "text": "Hủy"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton17",
                    "designerId": "deccdccc-7fc9-4b10-8097-9feb61810cb1",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCancelClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    vm\t= me.getViewModel(),",
                                    "    v = me.getView(),",
                                    "    sDet\t = vm.getStore('masterdetailsCWC'),",
                                    "    form = me.lookupReference('frmdetail');",
                                    "",
                                    "me.mixins.baseController.cancelRecord.call(me, function(){",
                                    "    if (v.down('#approvebtn')) {",
                                    "        if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "        else v.down('#approvebtn').hide();",
                                    "    }",
                                    "    me.enableDetButtons(false);",
                                    "    sDet.rejectChanges();",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onCancelClick",
                            "designerId": "97b6bff2-2d00-4b4f-828e-baef093c1d58"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-save",
                        "itemId": "savebtn",
                        "layout|flex": null,
                        "text": "Lưu"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton6",
                    "designerId": "7cbc0e5e-1083-4d20-b75f-7ac023cb36df",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onSaveClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v = me.getView(),",
                                    "    vm = me.getViewModel(),",
                                    "    main\t= v.up('maincontainer'),",
                                    "    gridDet = me.lookupReference('gridDet'),",
                                    "    sDet \t= gridDet.getStore(),",
                                    "    sumEvaluatedVal = 0,",
                                    "    s = vm.getStore('masters'),",
                                    "    r\t= vm.get('bindRecord'),",
                                    "    record = vm.get('bindRecord'),",
                                    "    validSetup\t= main.projectRecord.data,",
                                    "    mCtr\t= tavico.app.getController('MainController'),",
                                    "    comments = me.lookupReference('comments'),",
                                    "    contractcode = r.get('contractcode'),",
                                    "    milestone = r.get('milestone'),",
                                    "    cwcref = r.get('cwcref'),",
                                    "    isError = false;",
                                    "",
                                    "sDet.each(function(r){",
                                    "    sumEvaluatedVal += r.get('value');",
                                    "});",
                                    "",
                                    "if(Ext.isEmpty(comments.getValue())){",
                                    "    comments.setValue('');",
                                    "}",
                                    "record.set({",
                                    "    evaluatedvalue: sumEvaluatedVal",
                                    "});",
                                    "",
                                    "if(Ext.isEmpty(milestone) || validSetup.status == 'R' || r.get('status') == 'A' || validSetup.wcvsmilestone == 'N'){",
                                    "    saveMethod();",
                                    "    return;",
                                    "}",
                                    "",
                                    "FrmCpWorkCom.getTotal({",
                                    "    project: main.projectRecord.get('id'),",
                                    "    contractcode: contractcode,",
                                    "    milestone: milestone,",
                                    "    notId: cwcref",
                                    "}, function(res) {",
                                    "    if (res && res.success)  {",
                                    "        var cwcVal\t= res.data.totalEvaluatedVal,",
                                    "            cctAmt\t= res.data.totalInts,",
                                    "            tmp\t= r.get('evaluatedvalue'),",
                                    "            msg = '',",
                                    "            remainamt = (1+ validSetup.wcvsmilestonerate)*cctAmt - (cwcVal+tmp);",
                                    "",
                                    "        if (remainamt >= 0) {",
                                    "            saveMethod();",
                                    "            return;",
                                    "        }",
                                    "",
                                    "        if (remainamt < 0 && validSetup.wcvsmilestone != 'N') {",
                                    "            msg += ' vui lòng kiểm tra lại';",
                                    "            if (validSetup.wcvsmilestone == 'E') isError = true;",
                                    "            else if(validSetup.wcvsmilestone == 'W') msg += ' bạn có muốn lưu?';",
                                    "        }",
                                    "",
                                    "        if (!isError) {",
                                    "            Ext.Msg.alert({",
                                    "                title: 'Cảnh báo',",
                                    "                message: 'Tổng giá trị yêu cầu đánh giá hoàn thành đã vượt giá trị đợt thanh toán số tiền quy định '+ remainamt*(-1) +',' +msg,",
                                    "                buttons: Ext.Msg.YESNO,",
                                    "                icon: Ext.Msg.QUESTION,",
                                    "                fn: function(btn) {",
                                    "                    if (btn === 'yes') {",
                                    "                        saveMethod();",
                                    "                    }",
                                    "                }",
                                    "            });",
                                    "            return;",
                                    "        }",
                                    "",
                                    "        Ext.Msg.alert({",
                                    "            title: 'Lỗi',",
                                    "            message: 'Tổng giá trị yêu cầu đánh giá hoàn thành đã vượt giá trị đợt thanh toán số tiền quy định '+ remainamt*(-1) +',' +msg,",
                                    "            icon: Ext.Msg.ERROR,",
                                    "            buttons: Ext.Msg.OK",
                                    "        });",
                                    "    }",
                                    "});",
                                    "",
                                    "",
                                    "function saveMethod() {",
                                    "    //     if(Ext.isEmpty(me.isError) || me.isError === false){",
                                    "    //         saveDetailsMethod();",
                                    "    //     }",
                                    "    if(Ext.isEmpty(record.getProxy().getApi().create.$directCfg)){",
                                    "        record.getProxy().getApi().create = 'FrmCpWorkCom.add';",
                                    "        record.getProxy().getApi().destroy = 'FrmCpWorkCom.del';",
                                    "        record.getProxy().getApi().update = 'FrmCpWorkCom.upd';",
                                    "    }else{",
                                    "        record.getProxy().getApi().create.$directCfg.method.name = 'add';",
                                    "        record.getProxy().getApi().destroy.$directCfg.method.name = 'del';",
                                    "        record.getProxy().getApi().update.$directCfg.method.name = 'upd';",
                                    "    }",
                                    "",
                                    "    var dataValidate = [r.getData()];",
                                    "    dataValidate[0].details = [];",
                                    "    sDet.each(function(rx) {",
                                    "        Ext.Array.push(dataValidate[0].details, rx.getData());",
                                    "    });",
                                    "    FrmFdProcess.getValidation(\"CWC\", (r.phantom ? 'C' : 'A'), dataValidate, function(response) {",
                                    "        if (response) {",
                                    "            if (response.success) {",
                                    "                if (!Ext.isEmpty(response.data)) {",
                                    "                    r.set(response.data[0]);",
                                    "                }",
                                    "                syncStore(response.hasCmd);",
                                    "                if (response.message && response.errorType == 'I')",
                                    "                    Ext.Msg.alert({title: response.title, icon: Ext.Msg.INFO }, response.message);",
                                    "",
                                    "            } else if (response.errorType == 'C') {",
                                    "                Ext.Msg.alert({",
                                    "                    title\t: response.title,",
                                    "                    msg\t\t: response.message + '\\n' +LanguageControl.translate('Are you sure to save?'),",
                                    "                    buttons\t: Ext.Msg.YESNO,",
                                    "                    icon\t: Ext.Msg.QUESTION,",
                                    "                    fn\t\t: function(btn) {",
                                    "                        if (btn == 'yes') {",
                                    "                            if (!Ext.isEmpty(response.data)) {",
                                    "                                r.set(response.data[0]);",
                                    "                            }",
                                    "                            syncStore(response.hasCmd);",
                                    "                        } else {",
                                    "                            mCtr.hideWait();",
                                    "                            if (response.hasCmd === true) {",
                                    "                                FrmFdProcess.delCmd(shortcmd);",
                                    "                            }",
                                    "                        }",
                                    "                    }",
                                    "                });",
                                    "            } else {",
                                    "                mCtr.hideWait();",
                                    "                Ext.Msg.alert({title: response.title, icon: Ext.Msg.ERROR }, response.message);",
                                    "            }",
                                    "        } else mCtr.hideWait();",
                                    "    });",
                                    "}",
                                    "",
                                    "",
                                    "function syncStore(hasCmd) {",
                                    "    me.mixins.baseController.saveRecord.call(me, {",
                                    "        successFn: function(rec) {",
                                    "            sDet.each(function(r){",
                                    "                r.set('cwcref', vm.get('bindRecord.cwcref'));",
                                    "                r.set('itemid', r.get('itemid'));",
                                    "                r.set('contractcode', vm.get('bindRecord.contractcode'));",
                                    "            });",
                                    "            sDet.sync();",
                                    "            me.enableDetButtons(false);",
                                    "            if (v.down('#approvebtn')) {",
                                    "                if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "                else v.down('#approvebtn').hide();",
                                    "            }",
                                    "",
                                    "            if (hasCmd !== false) {",
                                    "                FrmFdProcess.runCmd(\"CWC\", function(response, e) {",
                                    "                    if (!response) {",
                                    "                        Ext.Msg.alert({ title: LanguageControl.translate('Error'), icon: Ext.Msg.ERROR }, LanguageControl.translate('There are something wrong in this process'));",
                                    "                    } else {",
                                    "                        if (response.success) {",
                                    "                        } else {",
                                    "                            if (response.errorType !== 'C') Ext.Msg.alert({ title: response.title, icon: Ext.Msg.ERROR }, response.message);",
                                    "                        }",
                                    "                    }",
                                    "                });",
                                    "            }",
                                    "        },",
                                    "    });",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onSaveClick",
                            "designerId": "93d39721-36fa-473a-9384-79deaff38d3e"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-edit",
                        "itemId": "editbtn",
                        "layout|flex": null,
                        "text": "Sửa"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton14",
                    "designerId": "7dbe7d39-6886-43d0-baf4-b8871c49f810",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onEditClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    form\t= me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    gridDet = me.lookupReference('gridDet'),",
                                    "    selectedRecord,",
                                    "    approvebtn = v.down('#approvebtn'),",
                                    "    verifybtn = v.down('#verifybtn'),",
                                    "    idApprove = 2246,",
                                    "    ops = tavico.app.getController('MainController').authConfig.operations;",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "} else selectedRecord = grid.getView().getSelectionModel().getSelection()[0];",
                                    "",
                                    "if (!me.keyFields) {",
                                    "    me.keyFields = [me.lookupReference('cwcref')];",
                                    "}",
                                    "if(!selectedRecord) return;",
                                    "",
                                    "this.mixins.baseController.editRecord.call(me,selectedRecord,function(){",
                                    "    me.isError = false;",
                                    "    if(approvebtn) approvebtn.hide();",
                                    "    me.setDetails(selectedRecord);",
                                    "    me.enableDetButtons(true);",
                                    "    me.setPermitApprove();",
                                    "    me.setPermitVerify();",
                                    "    if (approvebtn) {",
                                    "        approvebtn.hide();",
                                    "    }",
                                    "    if (verifybtn) {",
                                    "        verifybtn.hide();",
                                    "    }",
                                    "    if (vm.get('bindRecord.status')==='A'){",
                                    "        Ext.Array.each(form.query('field'),function(field){",
                                    "            field.setReadOnly(true);",
                                    "            me.lookupReference('comments').setReadOnly(false);",
                                    "        });",
                                    "        me.enableDetButtons(false);",
                                    "    }",
                                    "    if (ops.length <= idApprove || ops[idApprove] == 'N'){",
                                    "        if(selectedRecord.get('status') === 'V'){",
                                    "            Ext.Array.each(form.query('field'),function(f){",
                                    "                f.setReadOnly(true);",
                                    "            });",
                                    "            me.lookupReference('comments').setReadOnly(false);",
                                    "            me.enableDetButtons(false);",
                                    "        }",
                                    "    }",
                                    "    if(gridDet.getStore().getData().items.length > 0){",
                                    "        me.lookupReference('contractcode').setReadOnly(true);",
                                    "    }",
                                    "});"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onEditClick",
                            "designerId": "dbc2c16d-a41a-44c5-988d-b1e620efccf8",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-check",
                        "itemId": "approvebtn",
                        "layout|flex": null,
                        "text": "Duyệt"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton116",
                    "designerId": "2a20fe29-5756-40f3-ab20-c07c114c5329",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onApproveClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    s = vm.getStore('masters'),",
                                    "    form = me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    approveBtn = v.down('#approvebtn'),",
                                    "    selectedRecord,",
                                    "    selectedRecs = grid.getSelectionModel().getSelection(),",
                                    "    mCtr = tavico.app.getController('MainController');",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "",
                                    "    if (selectedRecord.get('status') === 'A'){",
                                    "        Ext.toast('Đã duyệt');",
                                    "        return;",
                                    "    }",
                                    "    Ext.Msg.prompt('Xác nhận', 'Bạn có chắc muốn duyệt dữ liệu này? <br/> Ý kiến kiểm duyệt của bạn:', function(btn, inputValue) {",
                                    "        if (btn == 'ok') {",
                                    "            selectedRecord.set({",
                                    "                status: 'A',",
                                    "                approveddate: new Date(),",
                                    "                approvednote: inputValue",
                                    "            });",
                                    "            if (Ext.isEmpty(vm.get('bindRecord.approvedby'))) {",
                                    "                selectedRecord.set('approvedby', tavico.app.getController('MainController').authConfig.operatorid);",
                                    "            }",
                                    "",
                                    "            selectedRecord.save({",
                                    "                success: function(rec, operation) {",
                                    "                    Ext.toast('Đã duyệt thành công');",
                                    "                    vm.set('bindRecord', selectedRecord);",
                                    "                    v.down('#approvebtn').hide();",
                                    "                },",
                                    "            });",
                                    "        }",
                                    "    },true);",
                                    "",
                                    "",
                                    "} else {",
                                    "    selectedRecs = grid.getView().getSelectionModel().getSelection();",
                                    "    if (Ext.isEmpty(selectedRecs)) return;",
                                    "",
                                    "    Ext.Msg.prompt('Xác nhận', 'Bạn có chắc muốn duyệt dữ liệu này? <br/> Ý kiến kiểm duyệt của bạn:', function(btn, inputValue) {",
                                    "        if (btn == 'ok') {",
                                    "            selectedRecord = selectedRecs[0];",
                                    "            if (Ext.isEmpty(selectedRecord.get('approvedby'))) {",
                                    "                selectedRecord.set('approvedby',mCtr.authConfig.operatorid);",
                                    "            }",
                                    "            selectedRecord.set('approveddate', new Date());",
                                    "            selectedRecord.set('status','A');",
                                    "            selectedRecord.set('approvednote', inputValue);",
                                    "",
                                    "            selectedRecord.save({",
                                    "                success: function(rec, operation) {",
                                    "                    Ext.toast('Đã duyệt thành công');",
                                    "                    vm.set('bindRecord', selectedRecord);",
                                    "                    v.down('#approvebtn').hide();",
                                    "                }",
                                    "            });",
                                    "",
                                    "",
                                    "        }",
                                    "    },true);",
                                    "",
                                    "",
                                    "}"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onApproveClick",
                            "designerId": "56239754-5c53-49da-9b7d-8bb3eb529261",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-check",
                        "itemId": "verifybtn",
                        "layout|flex": null,
                        "text": "Kiểm tra"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton165",
                    "designerId": "7fcfad54-64f6-4f2e-95c4-1975f29fb6c5",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onVerifyClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    s = vm.getStore('masters'),",
                                    "    form = me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    verifybtn = v.down('#verifybtn'),",
                                    "    selectedRecord,",
                                    "    selectedRecs = grid.getSelectionModel().getSelection(),",
                                    "    mCtr = tavico.app.getController('MainController');",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "",
                                    "    selectedRecord.set({",
                                    "        status: 'V',",
                                    "    });",
                                    "",
                                    "    selectedRecord.save({",
                                    "        success: function(rec, operation) {",
                                    "            Ext.toast('Đã kiểm tra thành công');",
                                    "            vm.set('bindRecord', selectedRecord);",
                                    "            v.down('#verifybtn').hide();",
                                    "        },",
                                    "    });",
                                    "",
                                    "",
                                    "} else {",
                                    "    selectedRecs = grid.getView().getSelectionModel().getSelection();",
                                    "    if (Ext.isEmpty(selectedRecs)) return;",
                                    "",
                                    "    selectedRecord = selectedRecs[0];",
                                    "   ",
                                    "    selectedRecord.set('status','V');",
                                    "    selectedRecord.save({",
                                    "        success: function(rec, operation) {",
                                    "            Ext.toast('Đã kiểm tra thành công');",
                                    "            vm.set('bindRecord', selectedRecord);",
                                    "            v.down('#verifybtn').hide();",
                                    "        }",
                                    "    });",
                                    "}"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onVerifyClick",
                            "designerId": "4b3973a5-6c99-4968-bd65-ace68b0c016d",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-trash",
                        "itemId": "delbtn",
                        "layout|flex": null,
                        "text": "Xóa"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton45",
                    "designerId": "471977e8-1cdb-43ef-adbe-c5897e1c3e98",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onDeleteClick",
                                "implHandler": [
                                    "var me\t= this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    form\t= me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    gridDet = me.lookupReference('gridDet'),",
                                    "    s = vm.getStore('masters'),",
                                    "    selectedRecord,",
                                    "    idApprove = 2246,",
                                    "    ops = tavico.app.getController('MainController').authConfig.operations;",
                                    "",
                                    "function delRec(){",
                                    "    if (selectedRecord){",
                                    "        if (selectedRecord.get('status') === 'W'){",
                                    "            me.mixins.baseController.deleteRecord.call(me, selectedRecord, function() {",
                                    "                if (v.down('#approvebtn')) {",
                                    "                    v.down('#approvebtn').hide();",
                                    "                }",
                                    "                s.load();",
                                    "            });",
                                    "        }else if(selectedRecord.get('status') === 'A'){",
                                    "            Ext.toast('Đã duyệt không thể xóa');",
                                    "        }else if(selectedRecord.get('status') === 'V'){",
                                    "            if(ops.length <= idApprove || ops[idApprove] == 'N'){",
                                    "                Ext.toast('Không thể xóa');",
                                    "                return;",
                                    "            }",
                                    "            me.mixins.baseController.deleteRecord.call(me, selectedRecord, function() {",
                                    "                s.load();",
                                    "            });",
                                    "        }",
                                    "    }",
                                    "}",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "    delRec();",
                                    "} else {",
                                    "    selectedRecord = grid.getView().getSelectionModel().getSelection()[0];",
                                    "    delRec();",
                                    "}"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onDeleteClick",
                            "designerId": "002e9703-34ed-451e-9325-837b9b09160a",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-upload",
                        "itemId": "importbtn",
                        "layout|flex": null,
                        "text": "Tải nhập"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton40",
                    "designerId": "2e79798a-e3bd-4121-b82a-6879cb117df1",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onImportBtnClick",
                                "implHandler": [
                                    "var me\t= this,",
                                    "    v \t= me.getView(),",
                                    "    w\t= Ext.widget('wdimport'),",
                                    "    vm\t= me.getViewModel(),",
                                    "    main\t= v.up('maincontainer'),",
                                    "    s\t= vm.getStore('masters');",
                                    "",
                                    "if (w.setImportType('CWC', {",
                                    "    project: main.projectRecord.get('id')",
                                    "})) {",
                                    "    w.show();",
                                    "    w.on('successCallback', function() {",
                                    "        s.load();",
                                    "    });",
                                    "}"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onImportBtnClick",
                            "designerId": "0bb41feb-2758-4549-92a2-9fbc53ee50fc",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-download",
                        "itemId": "exportbtn",
                        "layout|flex": null,
                        "text": "Tải xuất"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton41",
                    "designerId": "c105f169-30bd-4222-9222-8b929c809f5d",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onExportBtnClick",
                                "implHandler": [
                                    "this.mixins.baseController.exportRecord.call(this);"
                                ],
                                "maxHeight": "16",
                                "maxWidth": "16",
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onExportBtnClick",
                            "designerId": "a01ab0ee-048a-4406-a466-91342ccfe473",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                },
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxHeight",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-paperclip",
                        "itemId": "attachbtn",
                        "layout|flex": null,
                        "text": "Đính kèm"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton148",
                    "designerId": "4ecbc4d7-cc5c-4c96-91cf-091c4c18665b",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onAttachBtnClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    main = v.up('maincontainer'),",
                                    "    vm\t= me.getViewModel(),",
                                    "    form\t= me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    selectedRecord, wdDocument;",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "} else {",
                                    "    selectedRecord = grid.getSelectionModel().getSelection()[0];",
                                    "}",
                                    "if (selectedRecord) {",
                                    "    wdDocument\t= Ext.widget('wddocument');",
                                    "    wdDocument.init('CWC');",
                                    "    wdDocument.loadRecord(selectedRecord);",
                                    "    wdDocument.show();",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onAttachBtnClick",
                            "designerId": "66989b7f-dbf4-44cf-8c03-29dcc0af4e0b"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "x-fa fa-print",
                        "itemId": "printbtn",
                        "layout|flex": null,
                        "text": "In"
                    },
                    "configAlternates": {
                        "iconCls": "string",
                        "layout|flex": "number",
                        "scale": "string",
                        "text": "string",
                        "width": "auto",
                        "itemId": "string"
                    },
                    "name": "MyButton144",
                    "designerId": "e65f71cc-7143-499c-b4b0-c668dda7a4d8",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onPrintBtnClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    form\t= me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    gridDet = me.lookupReference('gridDet'),",
                                    "    selectedRecord;",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "} else selectedRecord = grid.getView().getSelectionModel().getSelection()[0];",
                                    "",
                                    "if (!me.keyFields) {",
                                    "    me.keyFields = [me.lookupReference('cwcref')];",
                                    "}",
                                    "",
                                    "if (selectedRecord){",
                                    "    me.mixins.baseController.printRecord.call(me, selectedRecord, 'CWC');",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string",
                                "maxHeight": "string",
                                "maxWidth": "string"
                            },
                            "name": "onPrintBtnClick",
                            "designerId": "5c491128-ee6f-4119-8c31-0fd15825039a",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "maxWidth",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Fill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null
                    },
                    "configAlternates": {
                        "layout|flex": "number"
                    },
                    "name": "MyFill",
                    "designerId": "fe084864-aae6-44dd-968d-81e5ba414e7d"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "plain-toolbar-small",
                        "iconCls": "x-fa fa-angle-double-left",
                        "itemId": "firstbtn",
                        "layout|flex": null,
                        "ui": "plain-toolbar-small"
                    },
                    "configAlternates": {
                        "designer|uiInterfaceName": "string",
                        "iconCls": "string",
                        "itemId": "string",
                        "layout|flex": "number",
                        "ui": "string"
                    },
                    "name": "MyButton33",
                    "designerId": "70e34392-1b0e-4ccf-83bf-37853c0f0e29",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onFirstBtnClick",
                                "implHandler": [
                                    "var me\t= this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    record = vm.get('bindRecord');",
                                    "",
                                    "me.mixins.baseController.first.call(me,function(rec){",
                                    "    me.setDetails(rec);",
                                    "    me.enableDetButtons(false);",
                                    "    if (v.down('#approvebtn')) {",
                                    "        if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "        else v.down('#approvebtn').hide();",
                                    "    }",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onFirstBtnClick",
                            "designerId": "86dd3bdd-9ec5-4d96-b728-65b6b2d858d6"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "plain-toolbar-small",
                        "iconCls": "x-fa fa-angle-left",
                        "itemId": "backbtn",
                        "layout|flex": null,
                        "ui": "plain-toolbar-small"
                    },
                    "configAlternates": {
                        "designer|uiInterfaceName": "string",
                        "iconCls": "string",
                        "layout|flex": "number",
                        "ui": "string",
                        "itemId": "string"
                    },
                    "name": "MyButton34",
                    "designerId": "2343a144-5de9-40b0-bf0d-c2ccbb388064",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBackBtnClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel();",
                                    "",
                                    "me.mixins.baseController.back.call(this,function(rec){",
                                    "    me.setDetails(rec);",
                                    "    me.enableDetButtons(false);",
                                    "    if (v.down('#approvebtn')) {",
                                    "        if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "        else v.down('#approvebtn').hide();",
                                    "    }",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onBackBtnClick",
                            "designerId": "0dcda42d-6e30-4006-90b4-14b5e3274f9e"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "plain-toolbar-small",
                        "iconCls": "x-fa fa-angle-right",
                        "itemId": "nextbtn",
                        "layout|flex": null,
                        "ui": "plain-toolbar-small"
                    },
                    "configAlternates": {
                        "designer|uiInterfaceName": "string",
                        "iconCls": "string",
                        "layout|flex": "number",
                        "ui": "string",
                        "itemId": "string"
                    },
                    "name": "MyButton35",
                    "designerId": "a9ab2f5f-9df1-4060-b353-dc9c27d5c6fc",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onNextBtnClick",
                                "implHandler": [
                                    "var me\t= this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel();",
                                    "me.mixins.baseController.next.call(this,function(rec){",
                                    "    me.setDetails(rec);",
                                    "    me.enableDetButtons(false);",
                                    "    if (v.down('#approvebtn')) {",
                                    "        if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "        else v.down('#approvebtn').hide();",
                                    "    }",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onNextBtnClick",
                            "designerId": "28fd619b-0109-44f9-9f40-cb5c5c5a6341"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "plain-toolbar-small",
                        "iconCls": "x-fa fa-angle-double-right",
                        "itemId": "lastbtn",
                        "layout|flex": null,
                        "ui": "plain-toolbar-small"
                    },
                    "configAlternates": {
                        "designer|uiInterfaceName": "string",
                        "iconCls": "string",
                        "layout|flex": "number",
                        "ui": "string",
                        "itemId": "string"
                    },
                    "name": "MyButton36",
                    "designerId": "be170778-1b33-45a1-9f49-9a21d1a5a60d",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onLastBtnClick",
                                "implHandler": [
                                    "var me\t= this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel();",
                                    "",
                                    "me.mixins.baseController.last.call(this,function(rec){",
                                    "    me.setDetails(rec);",
                                    "    me.enableDetButtons(false);",
                                    "    if (v.down('#approvebtn')) {",
                                    "        if(vm.get('bindRecord.status') === 'W') v.down('#approvebtn').show();",
                                    "        else v.down('#approvebtn').hide();",
                                    "    }",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onLastBtnClick",
                            "designerId": "cea4b733-1b26-4646-9159-0bb11176ddcc"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "plain-toolbar-small",
                        "iconCls": "x-fa fa-refresh",
                        "itemId": "refreshbtn",
                        "layout|flex": null,
                        "ui": "plain-toolbar-small"
                    },
                    "configAlternates": {
                        "designer|uiInterfaceName": "string",
                        "iconCls": "string",
                        "layout|flex": "number",
                        "ui": "string",
                        "itemId": "string"
                    },
                    "name": "MyButton39",
                    "designerId": "29fae0bb-b520-43a0-9488-269920e25ddf",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onRefreshBtnClick",
                                "implHandler": [
                                    "var me = this,",
                                    "    vm = me.getViewModel(),",
                                    "    s\t= vm.getStore('masters');",
                                    "// sDet.load();",
                                    "s.load();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onRefreshBtnClick",
                            "designerId": "20f21d7f-bdf7-43b7-bced-ae6e2805ad57"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "emptyText": "Nhập lệnh tắt",
                        "layout|flex": null
                    },
                    "configAlternates": {
                        "layout|flex": "number",
                        "emptyText": "string"
                    },
                    "name": "MyTextField76",
                    "designerId": "83cbb456-5c4e-4a10-9ad8-cb3df5366e51",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCommandSpecialkey",
                                "implHandler": [
                                    "var me = this,",
                                    "    v\t= me.getView(),",
                                    "    vm\t= me.getViewModel(),",
                                    "    form\t= me.lookupReference('frmdetail'),",
                                    "    grid = me.lookupReference('gpDetail'),",
                                    "    strCommand\t= field.getValue(),",
                                    "    selectedRecord;",
                                    "",
                                    "if (v.getLayout().getActiveItem() == form) {",
                                    "    selectedRecord = vm.get('bindRecord');",
                                    "} else selectedRecord = grid.getView().getSelectionModel().getSelection()[0];",
                                    "",
                                    "if (!me.keyFields) {",
                                    "    me.keyFields = [me.lookupReference('cwcref')];",
                                    "}",
                                    "",
                                    "if (e.getKey() == e.ENTER) {",
                                    "    field.selectText();",
                                    "    me.mixins.baseController.commandRun.call(me, strCommand, selectedRecord, function(rec){",
                                    "        me.setDetails(rec);",
                                    "    });",
                                    "}"
                                ],
                                "name": "specialkey",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onCommandSpecialkey",
                            "designerId": "f082e113-61d0-4eec-a78b-ff5f432dade7"
                        }
                    ]
                }
            ]
        }
    ]
}